{% extends 'base.html' %}

{% block title %}{{ dish.name }}{% endblock %}

{% block content %}
<h1>{{ dish.name }}</h1>
<p><strong>Description:</strong> {{ dish.description }}</p>
<p><strong>Price:</strong> ${{ dish.price }}</p>
<p><strong>Category:</strong> {{ dish.category.name }}</p>

<h3>Add a Comment</h3>
<form method="post" action="{% url 'dish_detail' dish.id %}">
    {% csrf_token %}
    <div class="mb-3">
        <label for="comment" class="form-label">Your comment:</label>
        <textarea id="comment" name="comment" class="form-control" required></textarea>
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</form>

<h3>Comments</h3>
<div id="comments-section">
    {% for comment in comments %}
        <div class="comment mb-3">
            <p>{{ comment.text }}</p>
            <small>Posted on {{ comment.created_at|date:"F j, Y, g:i a" }}</small>
        </div>
    {% empty %}
        <p>No comments yet. Be the first to comment!</p>
    {% endfor %}
</div>

<a href="/dishes/" class="btn btn-secondary">Back to Dishes</a>
{% endblock %}
